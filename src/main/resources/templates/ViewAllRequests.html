<!DOCTYPE html>
<html lang="en" xmlns:th=https://www.thymeleaf.org>
<head>
    <meta charset="UTF-8">
    <title>View All Requests</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container-fluid">
    <h1> View All Requests </h1>
    <table class="table table-striped table-responsive-md btn-table">
        <thead>
        <tr>
            <th> Title </th>
            <th> Created At </th>
            <th> Updated At </th>
            <th> Assignee </th>
            <th> Status </th>
        </tr>
        </thead>

        <ta th:each="request : ${requestList}">

        <tr>
            <td > <a th:href = "@{'/request/view/' + ${request.id}}"> <p th:text="${request.title}"> </p> </a> </td>
            <td th:text="${request.creationTime}"></td>
            <td th:text="${request.updationTime}"></td>
            <td th:text="${request.assigneeName}"></td>
            <td>
                <th:block th:switch="${#strings.trim(request.status)}">
                    <div th:case="OPEN">
                        <button type="button" class="btn btn-secondary" th:value="OPEN">Open</button>
                    </div>
                    <div th:case="IN_PROGRESS">
                        <button type="button" class="btn btn-primary" th:value="IN_PROGRESS">In Progress</button>
                    </div>
                    <div th:case="CLOSED">
                        <button type="button" class="btn btn-success" th:value="CLOSED">Closed</button>
                    </div>
                </th:block>
            </td>
        </tr>
        </ta>
    </table>
</div>

<a th:href="@{'/request/' + ${userId} + '/create'}" class="btn btn-success" role="button">Create Request</a>


</body>
</html>